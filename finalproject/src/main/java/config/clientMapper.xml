<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="client">
	<!-- 회원가입 정보 삽입 -->
	<insert id="ins" parameterType="dto.ClientDTO">
		insert into client(id, pass, name, phonenum, email, point, gender, birth)
		values(#{id, jdbcType=VARCHAR}, #{pass, jdbcType=VARCHAR}, #{name, jdbcType=VARCHAR}, #{phonenum, jdbcType=VARCHAR},
		 #{email, jdbcType=VARCHAR}, #{point, jdbcType=INTEGER}, #{gender, jdbcType=VARCHAR}, #{birth, jdbcType=VARCHAR})
	</insert>
	
	<!-- 이메일 중복체크 -->
	<select id="confirmEmail" parameterType="String" resultType="Integer">
		SELECT COUNT(*) FROM client where email=#{email} 
	</select>
	
	<!-- 아이디 중복체크 -->
	<select id="idcheck" parameterType="String" resultType="Integer">
		SELECT COUNT(*) FROM client where id = #{id}
	</select>

	<!-- 로그인 체크 -->
	<select id="loginCheck" parameterType="dto.ClientDTO" resultType="dto.ClientDTO">
		select id from client
		where id=#{id, jdbcType=VARCHAR} and pass=#{pass, jdbcType=VARCHAR}	
	</select>
	
	<select id="viewMember" resultType="dto.ClientDTO">
		select * from client where id=#{id, jdbcType=VARCHAR} and pass=#{pass, jdbcType=VARCHAR}
	</select>
	
	<!-- 아이디 찾기 -->
	<select id="find_id" parameterType="String" resultType="String">
		SELECT id FROM client WHERE email=#{email}
	</select>
	
	<!-- 비밀번호찾기 -->	
	<update id="update_pw" parameterType="dto.ClientDTO">
		UPDATE client SET pass=#{pass} WHERE id=#{id}
	</update>

	<!-- 네이버 로그인 -->
	<select id="naver" parameterType="String" resultType="String">
		SELECT id FROM client WHERE email=#{email}
	</select>
	
</mapper>